---
layout: post
title:  "ç®—æ³•ï¼šé€’å½’ï¼Œè´ªå¿ƒï¼Œåˆ†æ²»ï¼ŒåŠ¨æ€è§„åˆ’"
date:   2021-4-26
categories: algorithm
---

### **é€’å½’**

é€’å½’:å‡½æ•°(æ–¹æ³•)ç›´æ¥æˆ–é—´æ¥è°ƒç”¨è‡ªèº«ã€‚æ˜¯ä¸€ç§å¸¸ç”¨çš„ç¼–ç¨‹æŠ€å·§ã€‚ 

ä¸¥æ ¼æ¥è¯´é€’å½’ä¸ç®—ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œå…¶å®æœ€å¤šç®—æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€å·§!

#### æ–æ³¢é‚£å¥‘æ•°åˆ—

æ–æ³¢é‚£å¥‘æ•°åˆ—:1ã€1ã€2ã€3ã€5ã€8ã€13ã€21ã€34ã€......

f(1) = 1, f(2) = 1, f(n)=f(n-1)+f(n-2) ( n>=3 )

é€’å½’çš„å®ç°

```scala
def fib1(n: Int):Int = {
    if (n <= 1) n else fib1(n-1)+fib1(n-2)
	//     if (n <= 2) n  å®šä¹‰äº†é€’å½’åŸºï¼Œå¦‚æœå°äº2çš„æƒ…å†µç»ˆæ­¢é€’å½’
  // 		 fib1(n-1)+fib1(n-2) é€’å½’è°ƒç”¨
}
```

ä¸Šé¢çš„å®ç°éå¸¸ç®€æ´ï¼Œä½†æ˜¯æ•ˆç‡è¾ƒä½ï¼Œæ ¹æ®é€’æ¨å¼ T n = T (n âˆ’ 1) + T(n âˆ’ 2) + O(1)ï¼Œå¯å¾—çŸ¥

* æ—¶é—´å¤æ‚åº¦ï¼šO(2^n)
* ç©ºé—´å¤æ‚åº¦: O(n)
* é€’å½’è°ƒç”¨çš„ç©ºé—´å¤æ‚åº¦ = é€’å½’æ·±åº¦ * æ¯æ¬¡è°ƒç”¨æ‰€éœ€çš„è¾…åŠ©ç©ºé—´

![image-20210426095328158](/resource/dynamic_plan/assets/image-20210426095328158.png)

æ—¶é—´å¤æ‚åº¦é«˜çš„åŸå› æ˜¯å‡ºç°äº†å¤§é‡é‡å¤è°ƒç”¨ï¼Œè®¡ç®—fib(5)çš„æ—¶å€™å·¦è¾¹(fib(4))çš„åˆ†æ”¯ä¼šä»fib(0)å¼€å§‹æ¨ç®—åˆ°fib(3), å³è¾¹çš„åˆ†æ”¯(fib(3))åˆä¼šä»fib(0)å¼€å§‹æ¨ç®—åˆ°fib(3)...

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼šé¿å…é‡å¤è®¡ç®—ï¼Œä¹‹å‰è®¡ç®—è¿‡çš„å€¼ä¸åœ¨è®¡ç®—ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„ç¼“å­˜èµ·æ¥

```scala
// ä½¿ç”¨æ•°ç»„
def fib2(n: Int):Int = {
  // ä¸éœ€è¦é€’æ¨çš„æƒ…å†µ
  if (n <= 1) return n

  val list = new Array[Int](n+1)
  // é€’æ¨åŸº
  list(1) = 1
  for (i <- 2 to n) {
    list(i) = list(i-1) + list(i-2)
  }

  list.last
}
```

ä¸Šé¢çš„ä»£ç è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå› ä¸ºå…¶å®æ¯æ¬¡åªéœ€è¦ç”¨åˆ°æ•°ç»„çš„æœ€åä¸¤ä¸ªå…ƒç´ ï¼Œé‚£åªå®šä¹‰ä¸¤ä¸ªå˜é‡ç”¨æ¥ç¼“å­˜æ•°æ®å°±å¯ä»¥äº†

```scala
// ä½¿ç”¨å˜é‡
 def fib3(n: Int):Int = {
   if (n <= 1) return n
   
   var first = 0
   var second = 1
   for (_ <- 2 to n) {
     second = first+second
     first = second-first
   }
   second
 }
```

**æ€è€ƒ**ğŸ¤”

é€’å½’æ•ˆç‡ä¸é«˜ï¼Œä¸ºä½•è¿˜ä½¿ç”¨é€’å½’?

```sh
ä½¿ç”¨é€’å½’å¾€å¾€ä¸æ˜¯ä¸ºäº†æ±‚å¾—æœ€ä¼˜è§£ï¼Œæ˜¯ä¸ºäº†ç®€åŒ–è§£å†³é—®é¢˜çš„æ€è·¯ï¼Œä»£ç ä¼šæ›´ç®€æ´!!
å…ˆå¾—å‡ºæ­£ç¡®ç­”æ¡ˆï¼Œç„¶åå†ä»é€’å½’çš„è§£æ³•æ¨å¯¼å‡ºé€’æ¨çš„è§£æ³•
```

#### **è¯„ä»·ç®—æ³•**

å¯¹äºåŒä¸€ä¸ªé—®é¢˜å¯ä»¥å¤šç§è§£å†³æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åŒä¸€ä¸ªé—®é¢˜å¯ä»¥æœ‰å¤šç§ç®—æ³•å¯ä»¥è§£å†³ï¼Œé‚£æˆ‘ä»¬ä¸ç¦è¦é—®:

ä¸åŒçš„ç®—æ³•å®ƒä»¬çš„æ•ˆç‡ä¸€æ ·å—?

ç­”æ¡ˆæ˜¯è‚¯å®šä¸ä¸€æ ·ï¼Œä½¿ç”¨ä¸åŒçš„ç®—æ³•è§£å†³åŒä¸€ä¸ªé—®é¢˜ï¼Œæ•ˆç‡å¯èƒ½ç›¸å·®éå¸¸å¤§ï¼ğŸ˜±

##### **äº‹åç»Ÿè®¡æ³•**

æ¯”è¾ƒä¸åŒç®—æ³•å¯¹åŒä¸€ç»„è¾“å…¥æ•°æ®çš„å¤„ç†æ—¶é—´ï¼Œè¢«ç§°ä¸ºäº‹åç»Ÿè®¡æ³•

éœ€è¦ç¼–å†™æ•ˆç‡ç»Ÿè®¡å·¥å…·ï¼Œç”¨æ¥è¯„ä¼°ç®—æ³•çš„æ•ˆç‡

```java
// java
import java.text.SimpleDateFormat;
import java.util.Date;

public class Times {
    private static final SimpleDateFormat fmt = new SimpleDateFormat("HH:mm:ss.SSS");

    public interface Task {
        void execute();
    }

    public static void test(String name, Task task) {
        if (task == null) return;
        name = (name == null) ? "" : ("[ " + name + " ]");
        System.out.println(name);
        System.out.println("begin : " + fmt.format(new Date()));
        long begin = System.currentTimeMillis();
        task.execute();
        long end = System.currentTimeMillis();
        System.out.println("end: " + fmt.format(new Date()));
        double delta = (end - begin)/1000.0;
        System.out.println("duration: " + delta + " s");
        System.out.println("---------------------------------------------");
    }
}
```

äº‹åç»Ÿè®¡æ³•ç¼ºç‚¹

* æ‰§è¡Œæ—¶é—´å–å†³äºç¡¬ä»¶ä»¥åŠè¿è¡Œæ—¶å„ç§ä¸ç¡®å®šçš„ç¯å¢ƒå› ç´ (å¼€å¯å¾ˆå¤šè½¯ä»¶ä¸æ²¡å¼€å¯å¾ˆå¤šè½¯ä»¶) 

* å¿…é¡»ç¼–å†™æµ‹è¯•ä»£ç  

* æµ‹è¯•æ•°æ®çš„é€‰æ‹©æ¯”è¾ƒéš¾ä¿è¯å…¬æ­£æ€§(æœ‰äº›ç®—æ³•æ•°æ®é‡å°å¯èƒ½å¿«ï¼Œå¤§äº†å°±ä¸è¡Œï¼Œæœ‰äº›ç›¸å)

  

é€šå¸¸ä»ä»¥ä¸‹ç»´åº¦æ¥è¯„ä¼°ç®—æ³•çš„ä¼˜åŠ£

* æ­£ç¡®æ€§ã€å¯è¯»æ€§ã€å¥å£®æ€§(å¯¹ä¸åˆç†è¾“å…¥çš„ååº”èƒ½åŠ›å’Œå¤„ç†èƒ½åŠ›)
* æ—¶é—´å¤æ‚åº¦(Time complexity):ä¼°ç®—ç¨‹åºæŒ‡ä»¤çš„æ‰§è¡Œæ¬¡æ•°(æ‰§è¡Œæ—¶é—´)
* ç©ºé—´å¤æ‚åº¦(Space complexity):ä¼°ç®—æ‰€éœ€å ç”¨çš„å­˜å‚¨ç©ºé—´


##### **å¤§Oè¡¨ç¤ºæ³•(Big O)**

å¤§Oè¡¨ç¤ºæ³•çš„å®šä¹‰:ä¸€èˆ¬ç”¨å¤§Oè¡¨ç¤ºæ³•æ¥æè¿°ç®—æ³•å¤æ‚åº¦ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯ç®—æ³•å¯¹äºæ•°æ®è§„æ¨¡ nçš„å¤æ‚åº¦(æ—¶é—´å¤æ‚åº¦ï¼Œç©ºé—´å¤æ‚åº¦)

**å¸¸è§å¤æ‚åº¦**

![image-20210426101912853](/resource/dynamic_plan/assets/image-20210426101912853.png)

**æ—¶é—´å¤æ‚åº¦çš„ä¼˜å…ˆçº§**

```sh
 O(1) < O(logn) < O(n) < O(nlogn) < O(n2) < O(n3) < O(2n) < O(n!) < O(nn)
```

ä¼˜åŒ–ç®—æ³•ä¸»è¦æ˜¯ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦çš„çº§åˆ«

**å¤æ‚åº¦æ›²çº¿å›¾**

![image-20210426102056654](/resource/dynamic_plan/assets/image-20210426102056654.png)

**ç©ºé—´å¤æ‚åº¦**

ç©ºé—´å¤æ‚åº¦æ˜¯ä¼°ç®—å¤§æ¦‚å ç”¨çš„å­˜å‚¨ç©ºé—´

å¯¹äºå½“å‰çš„ç®—æ³•ç¨‹åºæ¥è¯´æˆ‘ä»¬æ›´å…³æ³¨çš„æ—¶é—´å¤æ‚åº¦ï¼Œå› ä¸ºç°åœ¨ç¡¬ä»¶èµ„æºéƒ½å¾ˆå……è¶³!

è¡¥å……:æ³¨æ„å¤§Oè¡¨ç¤ºæ³•æ˜¯ä¼°ç®—ï¼Œæ‰€è°“çš„æ‰§è¡Œæ¬¡æ•°å¹¶ä¸æ˜¯æˆ‘ä»¬çš„ä»£ç æ‰§è¡Œæ¬¡æ•°ï¼Œå› ä¸ºä»£ç æœ€ç»ˆéƒ½è¦è½¬ä¸ºæ±‡ç¼–çš„æŒ‡ä»¤ï¼Œå¯èƒ½å°±ä¸ä»…ä»…æ˜¯æˆ‘ä»¬ä»£ç çš„æ‰§è¡Œæ¬¡æ•°äº†ã€‚ä½†æ˜¯è¿™ç§å·®å¼‚å¤§æ¦‚éƒ½ä¸€æ ·è€Œä¸”æ˜¯å¸¸æ•°çº§åˆ«ï¼Œæ‰€ä»¥ä¸å½±å“å¤§Oè¡¨ç¤ºæ³•çš„æœ€ç»ˆç»“æœï¼Œå¤§Oè¡¨ç¤ºæ³•ä¸»è¦çœ‹é‡çº§

**ä¼°ç®—æ–æ³¢é‚£å¥‘å®ç°å¤æ‚åº¦**

```scala
def fib1(n: Int):Int = {
    if (n <= 1) n else fib1(n-1)+fib1(n-2)
}
// æ—¶é—´å¤æ‚åº¦ï¼šO(2^n)
// ç©ºé—´å¤æ‚åº¦ï¼šO(n)

def fib2(n: Int):Int = {
  // ä¸éœ€è¦é€’æ¨çš„æƒ…å†µ
  if (n <= 1) return n

  val list = new Array[Int](n+1)
  // é€’æ¨åŸº
  list(1) = 1
  for (i <- 2 to n) {
    list(i) = list(i-1) + list(i-2)
  }

  list.last
}
// æ—¶é—´å¤æ‚åº¦ï¼šO(n)
// ç©ºé—´å¤æ‚åº¦ï¼šO(n)

def fib3(n: Int):Int = {
  if (n <= 1) return n
  
  var first = 0
  var second = 1
  for (_ <- 2 to n) {
    second = first+second
    first = second-first
  }
  second
}
// æ—¶é—´å¤æ‚åº¦ï¼šO(n)
// ç©ºé—´å¤æ‚åº¦ï¼šO(1)
```

 **ç®—æ³•ä¼˜åŒ–è§’åº¦**

* å°½å¯èƒ½å°‘çš„æ‰§è¡Œæ—¶é—´
* å°½å¯èƒ½å°‘çš„å­˜å‚¨ç©ºé—´
* æ ¹æ®æƒ…å†µï¼Œå¯ä»¥ç©ºé—´æ¢æ—¶é—´ æ—¶é—´æ¢ç©ºé—´

#### **é€’å½’åŸºæœ¬æ€æƒ³**

é€’å½’çš„åŸºæœ¬æ€æƒ³å°±æ˜¯æ‹†è§£é—®é¢˜ï¼Œé€šè¿‡ä¸‹å›¾ç†è§£é€’å½’çš„æ€æƒ³

![image-20210426102915180](/resource/dynamic_plan/assets/image-20210426102915180.png)

* æ‹†åˆ†é—®é¢˜
  * æŠŠè§„æ¨¡å¤§çš„é—®é¢˜ç¼–ç¨‹è§„æ¨¡è¾ƒå°çš„åŒç±»å‹é—®é¢˜
  * è§„æ¨¡è¾ƒå°çš„é—®é¢˜åˆä¸æ–­å˜æˆè§„æ¨¡æ›´å°çš„é—®é¢˜
  * è§„æ¨¡å°åˆ°ä¸€å®šç¨‹åº¦å°±å¯ä»¥ç›´æ¥å¾—åˆ°ç»“æœ

* æ±‚è§£
  * ç”±æœ€å°è§„æ¨¡é—®é¢˜çš„è§£æ¨å¯¼å‡ºè¾ƒå¤§è§„æ¨¡é—®é¢˜çš„è§£
  * ç”±è¾ƒå¤§è§„æ¨¡é—®é¢˜çš„è§£ä¸æ–­æ¨å¯¼å‡ºè§„æ¨¡æ›´å¤§é—®é¢˜çš„è§£
  * æœ€åæ¨å¯¼å‡ºåŸæ¥é—®é¢˜çš„è§£

æ€»ç»“ï¼šä»äººç”Ÿç›®æ ‡é€’æ¨åˆ°ä»Šå¤©è¦åšä»€ä¹ˆï¼Œç„¶åä¸€æ­¥æ­¥è¿ˆå‘äººç”Ÿå·…å³°

#### **é€’å½’ä½¿ç”¨æ­¥éª¤ä¸æŠ€å·§**

* **ç¡®å®šå‡½æ•°çš„åŠŸèƒ½**ï¼šç¬¬ä¸€æ­¥å…ˆä¸è¦æ€è€ƒå‡½æ•°é‡Œé¢ä»£ç é€»è¾‘å¦‚ä½•å®ç°ï¼Œå…ˆææ¸…æ¥šè¿™ä¸ªå‡½æ•°çš„ç›®çš„ï¼Œå®Œæˆä»€ä¹ˆäº‹æƒ…?

* **ç¡®å®šå­é—®é¢˜ä¸åŸé—®é¢˜çš„å…³ç³»**ï¼šæ‰¾åˆ° f(n) ä¸ f(n â€“ 1) çš„å…³ç³»

* **æ˜ç¡®é€’å½’åŸº(è¾¹ç•Œæ¡ä»¶)**

  * é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œé—®é¢˜çš„è§„æ¨¡åœ¨ä¸æ–­å‡å°ï¼Œå½“é—®é¢˜ç¼©å‡åˆ°ä¸€å®šç¨‹åº¦ä¾¿å¯ä»¥ç›´æ¥å¾—å‡ºå®ƒçš„è§£

  * å¯»æ‰¾é€’å½’åŸºï¼Œç­‰ä»·äº:é—®é¢˜è§„æ¨¡å°åˆ°ä»€ä¹ˆç¨‹åº¦å¯ä»¥ç›´æ¥å¾—å‡ºè§£?

#### **è·³å°é˜¶**

é¢˜ç›®:æ¥¼æ¢¯æœ‰ n é˜¶å°é˜¶ï¼Œä¸Šæ¥¼å¯ä»¥ä¸€æ­¥ä¸Š 1 é˜¶ï¼Œä¹Ÿå¯ä»¥ä¸€æ­¥ä¸Š 2 é˜¶ï¼Œèµ°å®Œ n é˜¶å°é˜¶å…±æœ‰å¤šå°‘ç§ä¸åŒçš„èµ°æ³•?

```scala
object StairDemo {
  def main(args: Array[String]): Unit = {
        for (i <- 1 to 5) {
          println(s"$i - ${stair(i)}")
        }
  }

  /**
   * æ¥¼æ¢¯æœ‰ n é˜¶å°é˜¶ï¼Œä¸Šæ¥¼å¯ä»¥ä¸€æ­¥ä¸Š 1 é˜¶ï¼Œ
   * å¯ä»¥ä¸€æ­¥ä¸Š 2 é˜¶ï¼Œèµ°å®Œ n é˜¶å°é˜¶å…±æœ‰å¤šå°‘ç§ä¸åŒçš„èµ°æ³•?
   * @param n
   * @return
   */
  def stair(n: Int):Int = {
    /**
     * å‡è®¾ç¬¬ä¸€æ¬¡èµ° 1 é˜¶ï¼Œè¿˜å‰© n â€“ 1 é˜¶ï¼Œå…± f(n â€“ 1) ç§èµ°æ³•
     * å‡è®¾ç¬¬ä¸€æ¬¡èµ° 2 é˜¶ï¼Œè¿˜å‰© n â€“ 2 é˜¶ï¼Œå…± f(n â€“ 2)ç§èµ°æ³•
     * æ‰€ä»¥f(n)=f(n-1)+f(n-2)
     * f(1) = 1         1
     * f(2) = (1,1) , 2;     2
     * f(3) = f(1)+f(2);       3
     * f(4) = f(n-1)+f(n-2);     5
     */
    if (n<=2) n else stair(n-1)+stair(n-2)
  }
}
```

ä¸Šé¢æ˜¯é€’å½’å®ç°ï¼Œä¼˜åŒ–æ–¹æ³•å¯ä»¥å‚è€ƒæ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ¡ˆä¾‹

#### **æ±‰è¯ºå¡”** **(Hanoi)**

ç¼–ç¨‹å®ç°æŠŠ A çš„ n ä¸ªç›˜å­ç§»åŠ¨åˆ° C(ç›˜å­ç¼–å·æ˜¯ [1, n] )

![image-20210426103851547](/resource/dynamic_plan/assets/image-20210426103851547.png)

ç§»åŠ¨è¦æ±‚:

* æ¯æ¬¡åªèƒ½ç§»åŠ¨ 1ä¸ªç›˜å­
* å¤§ç›˜å­å¿…é¡»æ”¾åœ¨å°ç›˜å­ä¸‹é¢(æŒªåŠ¨è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å¦‚æ­¤)

![image-20210426103938775](/resource/dynamic_plan/assets/image-20210426103938775.png)

**é—®é¢˜åˆ†æ**

![hanoi](/resource/dynamic_plan/assets/hanoi.png)

å¿…é¡»å°†n-1ä¸ªç›˜å­ç§»åŠ¨åˆ°BæŸ±ä¸Š!!

* å¦‚æœåªæœ‰ä¸€ä¸ªç›˜å­ï¼Œn==1æ—¶ï¼Œç›´æ¥å°†ç›˜å­ä»Aç§»åŠ¨åˆ°C; 
* å¦‚æœä¸æ­¢ä¸€ä¸ªç›˜å­ï¼Œn>=2æ—¶ï¼Œå…¶å®å¯ä»¥åˆ†ä¸ºä¸‰æ­¥
  * å°†n-1ä¸ªç›˜å­ä»Aç§»åŠ¨åˆ°B 
  * å°†ç¼–å·ä¸ºnçš„ç›˜å­ä»Aç§»åŠ¨åˆ°C 
  * å°†n-1ä¸ªç›˜å­ä»Bç§»åŠ¨åˆ°C

ç¬¬ä¸€æ­¥å’Œç¬¬ä¸‰æ­¥æ˜¯ç›¸åŒçš„ï¼Œä¸è¿‡æ˜¯æ¢äº†æŸ±å­

é€’å½’å®ç°

```scala
/**
 * åªæ‰“å°æ­¥éª¤
 * @param n
 * @param a
 * @param b
 * @param c
 */
def moveHanoi(n: Int, a: String, b: String, c: String):Unit = {
  // å°†n-1ä¸ªç›˜å­ä»Aç§»åŠ¨åˆ°B
  // å°†ç¼–å·ä¸ºnçš„ç›˜å­ä»Aç§»åŠ¨åˆ°C
  // å°†n-1ä¸ªç›˜å­ä»Bç§»åŠ¨åˆ°C
  
  if (n > 1) {
    	moveHanoi(n-1, a, c, b)
     	println(s"move $n from $a to $c")
     	moveHanoi(n-1, b, a, c)
  }
  else {
    	println(s"move $n from $a to $c")
  }
   /**
   * å¤æ‚åº¦åˆ†æ
   * æ—¶é—´å¤æ‚åº¦:O(2^n)
   * ç©ºé—´å¤æ‚åº¦:O(n)
   **/
}
 /**
 * æ‰“å°æ­¥éª¤ï¼Œå¹¶ç»Ÿè®¡æ­¥æ•°
 * @param n
 * @param a
 * @param b
 * @param c
 * @param prevCount åˆå§‹å€¼ï¼Œä¼šåœ¨é€’å½’ä¸­ç´¯åŠ 
 * @return å½“å‰å¾ªç¯çš„ç»“æœ
 */
def moveHanoi(n: Int, a: String, b: String, c: String, prevCount: Int): Int = {
  // å°†n-1ä¸ªç›˜å­ä»Aç§»åŠ¨åˆ°B
  // å°†ç¼–å·ä¸ºnçš„ç›˜å­ä»Aç§»åŠ¨åˆ°C
  // å°†n-1ä¸ªç›˜å­ä»Bç§»åŠ¨åˆ°C
  if (n > 1) {
    val count = moveHanoi(n-1, a, c, b, prevCount) + 1
     println(s"$count : move $n from $a to $c")
     moveHanoi(n-1, b, a, c, count)
  }
  else {
    val count = prevCount+1
     println(s"$count : move $n from $a to $c")
     count
  }
}
```

**é€’å½’ç™¾åˆ†ç™¾å¯ä»¥è½¬ä¸ºéé€’å½’!!** 

é€’å½’è½¬éé€’å½’ä¸¤ç§æ–¹å¼:

* è‡ªå·±ä½¿ç”¨æ ˆ
* è€ƒè™‘é‡å¤åˆ©ç”¨ä¸€ç»„ç›¸åŒçš„å˜é‡

éé€’å½’å®ç°hanoié—®é¢˜

```scala
// ä½¿ç”¨æ ˆæ¥å®ç°ï¼Œå»æ‰é€’å½’æ‰ç”¨
def moveHanoi2(n: Int, a: String, b: String, c: String): Unit = {
  // å°†n-1ä¸ªç›˜å­ä»Aç§»åŠ¨åˆ°B
  // å°†ç¼–å·ä¸ºnçš„ç›˜å­ä»Aç§»åŠ¨åˆ°C
  // å°†n-1ä¸ªç›˜å­ä»Bç§»åŠ¨åˆ°C

  // Boolean, Int, String, String, String
  // isPrint, Int, from, middle, to
  val stack = new mutable.ArrayStack[(Boolean, Int, String, String, String)]()

  /**
   * ä½¿ç”¨ä¸€ä¸ªstackæ¥å­˜éœ€è¦å¤„ç†çš„çŠ¶æ€ï¼Œé‡åˆ°printå°±æ‰“å°ï¼Œé‡åˆ°å…¶ä»–å°±å±•å¼€åé‡æ–°æ”¾å›
   */
  if (n > 1) {
    stack.push((false, n-1, b, a, c))
    stack.push((true, n, a, b, c))
    stack.push((false, n-1, a, c, b))
  } else {
    stack.push((true, n, a, b, c))
  }

  while (stack.nonEmpty) {
    val (isPrint, nn, from, middle, to) = stack.pop()
    if (isPrint) {
      println(s"move $nn from $from to $to")
    } else if (nn > 1) {
      stack.push((false, nn-1, middle, from, to))
      stack.push((true, nn, from, middle, to))
      stack.push((false, nn-1, from, to, middle))
    } else {
      stack.push((true, nn, from, middle, to))
    }
  }
}
```

### **è´ªå¿ƒ**

è´ªå¿ƒç­–ç•¥ï¼Œä¹Ÿè¢«ç§°ä¸ºè´ªå©ªç­–ç•¥ã€‚
ä»€ä¹ˆè´ªå¿ƒç­–ç•¥?
æ¯ä¸€æ­¥éƒ½é‡‡å–å½“å‰çŠ¶æ€ä¸‹æœ€ä¼˜çš„é€‰æ‹©(å±€éƒ¨æœ€ä¼˜è§£)ï¼Œä»è€Œå¸Œæœ›æ¨å¯¼å‡ºå…¨å±€æœ€ä¼˜è§£

#### **æµ·ç›—è¿è´§-æœ€ä¼˜è£…è½½é—®é¢˜**

æµ·ç›—ä»¬æˆªè·äº†ä¸€è‰˜è£…æ»¡å„ç§å„æ ·å¤è‘£çš„è´§èˆ¹ï¼Œæ¯ä¸€ä»¶å¤è‘£éƒ½ä»·å€¼è¿åŸï¼Œä¸€æ—¦æ‰“ç¢å°±å¤±å»äº†çå®çš„ä»·å€¼ æµ·ç›—èˆ¹çš„è½½é‡ é‡ä¸º Wï¼Œæ¯ä»¶å¤è‘£çš„é‡é‡ä¸º ğ‘¤iï¼Œæµ·ç›—ä»¬æ€ä¹ˆåšæ‰èƒ½æŠŠå°½å¯èƒ½å¤šæ•°é‡çš„å¤è‘£è£…ä¸Šæµ·ç›—èˆ¹? æ¯”å¦‚ W ä¸º 30ï¼Œğ‘¤i åˆ†åˆ«ä¸º 3,5,4,10,7,14,2,11

ä½¿ç”¨è´ªå¿ƒç­–ç•¥è§£å†³
é€‰æ‹©è´§ç‰©æ ‡å‡†:æ¯ä¸€æ¬¡éƒ½ä¼˜å…ˆé€‰æ‹©é‡é‡æœ€å°çš„å¤è‘£ï¼Œè¶Šå¤šè¶Šå¥½!!

```scala
/**
1ã€é€‰æ‹©é‡é‡ä¸º 2 çš„å¤è‘£ï¼Œå‰©é‡é‡ 28 
2ã€é€‰æ‹©é‡é‡ä¸º 3 çš„å¤è‘£ï¼Œå‰©é‡é‡ 25 
3ã€é€‰æ‹©é‡é‡ä¸º 4 çš„å¤è‘£ï¼Œå‰©é‡é‡ 21 
4ã€é€‰æ‹©é‡é‡ä¸º 5 çš„å¤è‘£ï¼Œå‰©é‡é‡ 16 
5ã€é€‰æ‹©é‡é‡ä¸º 7 çš„å¤è‘£ï¼Œå‰©é‡é‡ 9
ç»“è®º:æŒ‰ç…§ä»¥ä¸Šé¡ºåºè£…è½½è´§ç‰©ï¼Œå¹¶æœ€å¤šè£…è½½5ä»¶å¤è‘£!!
*/
def piratePackage():Int = {
  val capacity = 30
  var goods = List(3,5,4,10,7,14,2,11)
  // æŒ‰ç…§é‡é‡å‡åº
  goods = goods.sorted

  var res = capacity
  var index = 0
  while (res > goods(index)) {
    res -= goods(index)
    index+=1
  }
  index
}
```

#### **é›¶é’±å…‘æ¢**

å‡è®¾æœ‰ 25 åˆ†ã€5 åˆ†ã€1 åˆ†çš„ç¡¬å¸ï¼Œç°è¦æ‰¾ç»™å®¢æˆ· 41 åˆ†çš„é›¶é’±ï¼Œå¦‚ä½•åŠåˆ°ç¡¬å¸ä¸ªæ•°æœ€å°‘?

è´ªå¿ƒç­–ç•¥: æ¯ä¸€æ­¥éƒ½ä¼˜å…ˆé€‰æ‹©é¢å€¼æœ€å¤§çš„ç¡¬å¸
å…·ä½“æ­¥éª¤

* é€‰æ‹© 25 åˆ†çš„ç¡¬å¸ï¼Œå‰© 16 åˆ† 
* é€‰æ‹© 5 åˆ†çš„ç¡¬å¸ï¼Œå‰© 11 åˆ† 
* é€‰æ‹© 5 åˆ†çš„ç¡¬å¸ï¼Œå‰© 6 åˆ† 
* é€‰æ‹© 5 åˆ†çš„ç¡¬å¸ï¼Œå‰© 1 åˆ† 
* é€‰æ‹© 1 åˆ†çš„ç¡¬å¸

æœ€ç»ˆçš„è§£æ˜¯ 1 æš 25 åˆ†ã€3 æš 5 åˆ†ã€1 æš 1 åˆ†çš„ç¡¬å¸ï¼Œå…± 5 æšç¡¬å¸

```scala
/**
 * é›¶é’±å…‘æ¢
 * å‡è®¾æœ‰ 25 åˆ†ã€5 åˆ†ã€1 åˆ†çš„ç¡¬å¸ï¼Œç°è¦æ‰¾ç»™å®¢æˆ· 41 åˆ†çš„é›¶é’±ï¼Œå¦‚ä½•åŠåˆ°ç¡¬å¸ä¸ªæ•°æœ€å°‘?
 */
def getCoins(money: Int, faces: List[Int]): Unit = {
  val total = money
  val sortedFaces = faces.sorted.reverse

  var count = 0
  var res = total
  var index = 0
  // å‡è®¾è‚¯å®šèƒ½å…‘æ¢æˆåŠŸ
  while (res != 0) {
    // å¦‚æœå¯ä»¥å…‘æ¢å°±å…‘æ¢ï¼Œä¸ç„¶å°±æ¢å°é¢é¢ï¼Œç»§ç»­å¾ªç¯
    if (res >= sortedFaces(index)) {
      res -= sortedFaces(index)
      count+=1
      println(sortedFaces(index))
    } else {
      index+=1
    }
  }

  println(s"coin count: $count")
}
```

å¦‚æœå¯ç”¨ç¡¬å¸æ˜¯ 5, 25, 20, 1ï¼Œ åˆ™ä½¿ç”¨ä¸Šé¢çš„ç®—æ³•æ— æ³•å¾—åˆ°æœ€ä¼˜è§£ ï¼ˆ20ï¼Œ20ï¼Œ1ï¼‰ï¼Œåªèƒ½å¾—åˆ°ï¼ˆ25ï¼Œ5ï¼Œ5ï¼Œ5ï¼Œ1ï¼‰

è´ªå¿ƒç­–ç•¥çš„ä¼˜ç¼ºç‚¹:

* ä¼˜ç‚¹

  * ç®€å•ã€é«˜æ•ˆã€ä¸éœ€è¦ç©·ä¸¾æ‰€æœ‰å¯èƒ½ï¼Œé€šå¸¸ä½œä¸ºå…¶ä»–ç®—æ³•çš„è¾…åŠ©ç®—æ³•æ¥ä½¿ç”¨
  
* ç¼ºç‚¹
  * ç›®å…‰çŸ­æµ…ï¼Œä¸ä»æ•´ä½“ä¸Šè€ƒè™‘å…¶ä»–å¯èƒ½ï¼Œæ¯ä¸€æ­¥åªé‡‡å–å±€éƒ¨æœ€ä¼˜è§£ï¼Œä¸ä¼šå¯¹æ¯”å…¶ä»–å¯èƒ½æ€§ï¼Œå› æ­¤è´ªå¿ƒå¾ˆå°‘æƒ…å†µèƒ½è·å¾—æœ€ä¼˜è§£ã€‚

#### **0-1èƒŒåŒ…é—®é¢˜**

æœ‰ n ä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤§æ‰¿é‡ä¸º W çš„èƒŒåŒ…ï¼Œæ¯ä»¶ç‰©å“çš„é‡é‡æ˜¯ ğ‘¤iã€ä»·å€¼æ˜¯ ğ‘£i

* åœ¨ä¿è¯æ€»é‡é‡ä¸è¶…è¿‡ W çš„å‰æä¸‹ï¼Œå°†å“ªå‡ ä»¶ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä»¥ä½¿å¾—èƒŒåŒ…çš„æ€»ä»·å€¼æœ€å¤§? 
* æ³¨æ„:æ¯ä¸ªç‰©å“åªæœ‰ 1 ä»¶ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªç‰©å“åªèƒ½é€‰æ‹© 0 ä»¶æˆ–è€… 1 ä»¶ï¼Œå› æ­¤è¿™ç±»é—®é¢˜ä¹Ÿè¢«ç§°ä¸º 0-1èƒŒåŒ…é—®é¢˜

ä½¿ç”¨è´ªå©ªç®—æ³•å¯ä»¥ä»3ä¸ªç»´åº¦å…¥æ‰‹

* ä»·å€¼ä¸»å¯¼:ä¼˜å…ˆé€‰æ‹©ä»·å€¼æœ€é«˜çš„ç‰©å“æ”¾è¿›èƒŒåŒ… 
* é‡é‡ä¸»å¯¼:ä¼˜å…ˆé€‰æ‹©é‡é‡æœ€è½»çš„ç‰©å“æ”¾è¿›èƒŒåŒ… 
* ä»·å€¼å¯†åº¦ä¸»å¯¼:ä¼˜å…ˆé€‰æ‹©ä»·å€¼å¯†åº¦æœ€é«˜çš„ç‰©å“æ”¾è¿›èƒŒåŒ…(ä»·å€¼å¯†åº¦ = ä»·å€¼ Ã· é‡é‡)

ä»¥ä¸‹æ˜¯ç‰©å“åˆ—è¡¨:

| ç‰©å“åºå· | 1    | 2    | 3    | 4    |  5   |  6   |  7   |
| :--: | :--: | :--: | :--: | :--: | :--: |:--: |:--: |
| é‡é‡ | 35 | 30 | 60 | 50 | 40 | 10 | 25 |
| ä»·å€¼ | 10 | 40 | 30 | 50 | 35 | 40 | 30 |
| ä»·å€¼å¯†åº¦ | 0.29 | 1.33 | 0.5 | 1.0 | 0.88 | 4.0 | 1.2 |

å‡è®¾èƒŒåŒ…æ€»è½½é‡é‡æ˜¯150ï¼Œå°†å“ªå‡ ä»¶ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä»¥ä½¿å¾—èƒŒåŒ…çš„æ€»ä»·å€¼æœ€å¤§?

```scala
case class Item(weight: Double, value: Double) {
  val dense:Double = value/weight

  override def toString: String = s"item($weight, $value, $dense)"
}
object PackSackDemo {
  def main(args: Array[String]): Unit = {
    val items = List(
      Item(35, 10),
      Item(30, 40),
      Item(60, 30),
      Item(50, 50),
      Item(40, 35),
      Item(10, 40),
      Item(25, 30)
    )

    println("value priority")
    packSackMethod[Double](items, e=>{-e.value})
    println()
    println("weight priority")
    packSackMethod(items, e=>{e.weight})
    println()
    println("dense priority")
    packSackMethod(items, e=>{-e.dense})

    /**
     * value priority
     * selected items List(item(50.0, 50.0, 1.0), item(30.0, 40.0, 1.3333333333333333), item(10.0, 40.0, 4.0), item(40.0, 35.0, 0.875))
     * total value : 165.0
     * res : 20
     *
     * weight priority
     * selected items List(item(10.0, 40.0, 4.0), item(25.0, 30.0, 1.2), item(30.0, 40.0, 1.3333333333333333), item(35.0, 10.0, 0.2857142857142857), item(40.0, 35.0, 0.875))
     * total value : 155.0
     * res : 10
     *
     * dense priority
     * selected items List(item(10.0, 40.0, 4.0), item(30.0, 40.0, 1.3333333333333333), item(25.0, 30.0, 1.2), item(50.0, 50.0, 1.0), item(35.0, 10.0, 0.2857142857142857))
     * total value : 170.0
     * res : 0
     */
  }

  /**
   * æ ¹æ®æ’åºé€‰æ‹©å™¨è¿›è¡Œæ’åºï¼Œå¹¶ä»å·¦åˆ°å³å¼€å§‹è£…åŒ…
   * @param items æ‰€æœ‰ç‰©å“
   * @param comp  æ’åºé€‰æ‹©å™¨
   * @tparam B double
   */
    //<:Double Double åŠå…¶å­ç±»
    //>:Double Double çš„çˆ¶ç±»
  def packSackMethod[B<:Double](items: List[Item], comp: Item=>B): Unit = {
    implicit val ord = new Ordering[B] {
      override def compare(x: B, y: B): Int = x.compareTo(y)
    }

    val capacity = 150  //total
    var res = capacity    //current capacity
    val sortedItems = items.sortBy(comp)

    // cache selected items
    val arrayBuffer = new ArrayBuffer[Item]()
    for (it <- sortedItems) {
        if (it.weight.intValue() <= res) {
          res -= it.weight.intValue()
          arrayBuffer += it
        }
    }

    println(s"selected items ${arrayBuffer.toList}")
    println(s"total value : ${arrayBuffer.map(_.value).sum}")
    println(s"res : $res")
  }
}
```

ä»¥ä¸Šä»£ç ä¸èƒ½æ–­å®šå“ªä¸€ä¸ªæ˜¯æœ€ä¼˜è§£ï¼Œåªèƒ½è¯´æœ‰ç›¸å¯¹è¾ƒä¼˜è§£

### **åˆ†æ²»**

åˆ†æ²»ï¼Œå°±æ˜¯åˆ†è€Œæ²»ä¹‹ã€‚
åˆ†æ²»çš„ä¸€èˆ¬æ­¥éª¤:

1ã€å°†åŸé—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°çš„å­é—®é¢˜(å­é—®é¢˜å’ŒåŸé—®é¢˜çš„ç»“æ„ä¸€æ ·ï¼Œåªæ˜¯è§„æ¨¡ä¸ä¸€æ ·) 

2ã€å­é—®é¢˜åˆä¸æ–­åˆ†è§£æˆè§„æ¨¡æ›´å°çš„å­é—®é¢˜ï¼Œç›´åˆ°ä¸èƒ½å†åˆ†è§£(ç›´åˆ°å¯ä»¥è½»æ˜“è®¡ç®—å‡ºå­é—®é¢˜çš„è§£) 

3ã€åˆ©ç”¨å­é—®é¢˜çš„è§£æ¨å¯¼å‡ºåŸé—®é¢˜çš„è§£

æ‰€ä»¥:åˆ†æ²»æ€æƒ³éå¸¸é€‚åˆä½¿ç”¨é€’å½’å®ç°!!
æ³¨æ„:åˆ†æ²»çš„é€‚ç”¨åœºæ™¯ä¸­å¿…é¡»è¦æ±‚å­é—®é¢˜ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå¦‚æœå­é—®é¢˜ä¹‹é—´ä¸ç‹¬ç«‹åˆ™éœ€è¦ä½¿ç”¨åŠ¨æ€è§„åˆ’å®ç°!!

**åˆ†æ²»æ€æƒ³å›¾ç¤º**

![db9d172fc33b90e905c1213b8cce660c228bb99c](/resource/dynamic_plan/assets/db9d172fc33b90e905c1213b8cce660c228bb99c.png)

ç»å…¸çš„æ’åºç®—æ³•ï¼Œå¿«é€Ÿæ’åºå’Œå½’å¹¶æ’åºéƒ½æ˜¯ä½¿ç”¨äº†åˆ†æ²»çš„æ€æƒ³

#### **å¿«é€Ÿæ’åº(Quick Sort)**

Quick Sortåˆ†æ

![image-20210426131236834](/resource/dynamic_plan/assets/image-20210426131236834.png)

* ç¬¬ä¸€æ­¥ï¼š ä»æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªè½´ç‚¹å…ƒç´ (Pivot element)ï¼Œä¸€èˆ¬é€‰æ‹©0ä½ç½®å…ƒç´ ä¸ºè½´ç‚¹å…ƒç´ 
* ç¬¬äºŒæ­¥
  * åˆ©ç”¨Pivotå°†æ•°ç»„åˆ†å‰²æˆ2ä¸ªå­åºåˆ—
  * å°†å°äº Pivotçš„å…ƒç´ æ”¾åœ¨Pivotå‰é¢(å·¦ä¾§) ï¼Œå°†å¤§äº Pivotçš„å…ƒç´ æ”¾åœ¨Pivotåé¢(å³ä¾§) ï¼Œç­‰äºPivotçš„å…ƒç´ æ”¾å“ªè¾¹éƒ½å¯ä»¥(æš‚å®šæ”¾åœ¨å·¦è¾¹)
* ç¬¬ä¸‰æ­¥ï¼šå¯¹å­æ•°ç»„è¿›è¡Œç¬¬ä¸€æ­¥ï¼Œç¬¬äºŒæ­¥æ“ä½œï¼Œç›´åˆ°ä¸èƒ½å†åˆ†å‰²(å­æ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ )

Quick Sortçš„æœ¬è´¨: **ä¸æ–­åœ°å°†æ¯ä¸€ä¸ªå…ƒç´ éƒ½è½¬æ¢æˆè½´ç‚¹å…ƒç´ !!**

**ä»£ç å®ç°**

```java
public class JavaQuickSort {
    private Integer[] arr;

    public static void main(String[] args) {
        Integer[] array = new Integer[]{6, 2, 1, 5,6, 8,9};

        JavaQuickSort js = new JavaQuickSort();
        js.sort(array);
    }



    public void sort(final Integer[] array) {
        arr = array;

        // æ‰“å°æ’åºå‰çš„æ•°æ®
        for (int i=0; i< arr.length; i++) {
            System.out.print(arr[i]+"_");
        }
        System.out.println();

        // æ’åºå¹¶æ‰“å°æ’åºåçš„æ•°æ®
        sort(0, array.length);
        for (int i=0; i< arr.length; i++) {
            System.out.print(arr[i]+"_");
        }
        System.out.println();

    }

    /**
     * å¿«æ’å®ç°
     * @param start  å¼€å§‹æ’åºçš„çš„ä¸‹æ ‡
     * @param end   ç»“æŸæ’åºçš„çš„ä¸‹æ ‡
     */
    public void sort(Integer start, Integer end) {
        if (end-start < 2) return;

        Integer pivot = getPivotIndex(start, end);

        sort(start, pivot);
        sort(pivot+1, end);
    }

    /**
     * find define pivotElement and divide arr with pivot, return new pivot index
     * @param start å¼€å§‹æ’åºçš„çš„ä¸‹æ ‡
     * @param end   ç»“æŸæ’åºçš„çš„ä¸‹æ ‡
     * @return pivot
     */
    private Integer getPivotIndex(Integer start, Integer end) {
        Integer pivotElement = arr[start];
        end--; //point to the last index

        while (start < end) {
            // å°äºpivotçš„æ•°æ®å¾€å·¦æŒª
            while (start<end) {
                if(myCompare(pivotElement, arr[end]) < 0) {
                    end--;
                } else {
                    arr[start] = arr[end];
                    start++;
                    break;
                }
            }
            // å¤§äºpivotçš„æ•°æ®å¾€å³æŒª
            while (start<end) {
                if(myCompare(arr[start], pivotElement) < 0) {
                    start++;
                } else {
                    arr[end] = arr[start];
                    end--;
                    break;
                }
            }
        }

        arr[start] = pivotElement;

        return start;
    }

    // å®šä¹‰æ¯”è¾ƒæ–¹æ³•ï¼Œæ–¹ä¾¿ä¿®æ”¹æ’åºè§„åˆ™
    public int myCompare(Integer t1, Integer t2) {
        return t1.compareTo(t2);
    }
}
```

* æ—¶é—´å¤æ‚åº¦ 
  * æœ€åæƒ…å†µ:![image-20210426132252401](/resource/dynamic_plan/assets/image-20210426132252401.png)
  * æœ€å¥½æƒ…å†µ:![image-20210426132325071](/resource/dynamic_plan/assets/image-20210426132325071.png)
* ç©ºé—´å¤æ‚åº¦: ç”±äºé€’å½’è°ƒç”¨ï¼Œæ¯æ¬¡ç±»ä¼¼æŠ˜åŠæ•ˆæœæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯O(logn)

æœ€åæƒ…å†µçš„ä¾‹å­ï¼Œå¦‚ä¸‹æ•°æ®ï¼Œå¦‚æœpivotæ€»æ˜¯é€‰ç¬¬ä¸€ä¸ªï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n*n)

![image-20210426132352783](/resource/dynamic_plan/assets/image-20210426132352783.png)

å¦‚ä½•é™ä½å¿«é€Ÿæ’åºæ’åºæœ€åæ—¶é—´å¤æ‚åº¦äº§ç”Ÿçš„æ¦‚ç‡?

```sh
éšæœºæŒ‘é€‰ä¸€ä¸ªpivotï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½é€‰ç¬¬ä¸€ä¸ªå…ƒç´ 
```



#### **æ’åºç®—æ³•çš„ç¨³å®šæ€§**

```sh
å¯¹äºæ’åºç®—æ³•è¿˜æœ‰ä¸€ä¸ªè¯„ä»·æŒ‡æ ‡å°±æ˜¯ç¨³å®šæ€§!!
ä»€ä¹ˆæ˜¯æ’åºç®—æ³•çš„ç¨³å®šæ€§?
å¦‚æœç›¸ç­‰çš„2ä¸ªå…ƒç´ ï¼Œåœ¨æ’åºå‰åçš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ï¼Œåˆ™è¯¥ç®—æ³•æ˜¯ç¨³å®šçš„æ’åºç®—æ³•!!
å¿«æ’æ˜¯ä¸ç¨³å®šçš„æ’åº
```

ä¸¾ä¸ªä¾‹å­

```sh
 å¦‚æœa=b
 æ’åºå‰:5, 1, 2ğ‘, 4, 7, 2ğ‘ 
 ç¨³å®šçš„æ’åº: 1,2ğ‘,2ğ‘ ,4,5,7 
 ä¸ç¨³å®šçš„æ’åº:1, 2ğ‘ , 2ğ‘, 4, 5, 7
```

**å¯¹äºæ•°å€¼ç±»å‹çš„æ’åºè€Œè¨€ï¼Œç®—æ³•çš„ç¨³å®šæ€§æ²¡æœ‰æ„ä¹‰ï¼Œä½†æ˜¯å¯¹äºè‡ªå®šä¹‰å¯¹è±¡çš„æ’åºï¼Œæ’åºç®—æ³•çš„ç¨³å®šæ€§æ˜¯ä¼šå½±å“æœ€ç»ˆç»“æœçš„!!**

### **åŠ¨æ€è§„åˆ’**

åŠ¨æ€è§„åˆ’ï¼Œç®€ç§°ä¸ºDPã€‚ åŠ¨æ€è§„åˆ’æ˜¯æ±‚è§£æœ€ä¼˜åŒ–é—®é¢˜çš„ä¸€ç§å¸¸ç”¨ç­–ç•¥ã€‚ 

åŠ¨æ€è§„åˆ’ä½¿ç”¨æ­¥éª¤ï¼š

* é€’å½’(è‡ªé¡¶å‘ä¸‹ï¼Œå‡ºç°äº†é‡å å­é—®é¢˜) 
* é€’æ¨(è‡ªåº•å‘ä¸Šï¼Œå¾ªç¯)

å®šä¹‰ï¼š

```sh
Dynamic Programming is a method for solving a complex problem by breaking it down into a
collection of simpler subproblems, solving each of those subproblems just once, and
storing their solutions.
```

**åŠ¨æ€è§„åˆ’ç­–ç•¥å¯ä»¥è§£å†³å“ªäº›é—®é¢˜?**

è¿™ç±»é—®é¢˜é€šå¸¸å…·æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š

	* æœ€ä¼˜åŒ–é—®é¢˜(æœ€ä¼˜å­ç»“æ„é—®é¢˜):é€šè¿‡æ±‚è§£å­é—®é¢˜çš„æœ€ä¼˜è§£ï¼Œå¯ä»¥è·å¾—åŸé—®é¢˜çš„æœ€ä¼˜è§£ 
	* æ— åæ•ˆæ€§

**æ— åæ•ˆæ€§**

æ— åæ•ˆæ€§æ˜¯æŒ‡æŸé˜¶æ®µçš„çŠ¶æ€ä¸€æ—¦ç¡®å®šåï¼Œåç»­çŠ¶æ€çš„æ¼”å˜ä¸å†å—æ­¤å‰å„çŠ¶æ€åŠå†³ç­–çš„å½±å“(æœªæ¥ä¸è¿‡å»æ— 
å…³);åœ¨æ¨å¯¼åé¢é˜¶æ®µçš„çŠ¶æ€æ—¶ï¼Œåªå…³å¿ƒå‰é¢é˜¶æ®µçš„å…·ä½“çŠ¶æ€å€¼ï¼Œä¸å…³å¿ƒè¿™ä¸ªçŠ¶æ€æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥æ¨å¯¼å‡º! ï¼ˆ**æ˜¨å¤©çš„è¿‡å¤±ä¸ä¼šå½±å“ä»Šå¤©çš„å†³ç­–**ï¼‰

<img src="/resource/dynamic_plan/assets/image-20210426133430776.png" alt="image-20210426133430776" style="zoom:40%;" />

* ä»èµ·ç‚¹(0, 0)èµ°åˆ°ç»ˆç‚¹(4, 4)ä¸€å…±æœ‰å¤šå°‘ç§èµ°æ³•?åªèƒ½å‘å³ã€å‘ä¸‹èµ°
* å‡è®¾ dp(i, j) æ˜¯ä»(0, 0)èµ°åˆ°(i, j)çš„èµ°æ³•
  * dp(i, 0) = dp(0, j) = 1
  * dp(i, j) = dp(i, j â€“ 1) + dp(i â€“ 1, j)

æ€»ç»“ï¼šæ¨å¯¼ dp(i, j) æ—¶åªéœ€è¦ç”¨åˆ° dp(i, j â€“ 1)ã€dp(i â€“ 1, j) çš„å€¼ ä¸éœ€è¦å…³å¿ƒ dp(i, j â€“ 1)ã€dp(i â€“ 1, j) çš„å€¼æ˜¯æ€ä¹ˆæ±‚å‡ºæ¥çš„

**æœ‰åæ•ˆæ€§**

<img src="/resource/dynamic_plan/assets/image-20210426133430776.png" alt="image-20210426133430776" style="zoom:40%;" />

è§„åˆ™:å¯ä»¥å‘å·¦ã€å‘å³ã€å‘ä¸Šã€å‘ä¸‹èµ°ï¼Œå¹¶ä¸”åŒä¸€ä¸ªæ ¼å­ä¸èƒ½èµ° 2 æ¬¡ 

æœ‰åæ•ˆæ€§:

* dp(i, j) ä¸‹ä¸€æ­¥è¦æ€ä¹ˆèµ°ï¼Œè¿˜è¦å…³å¿ƒä¸Šä¸€æ­¥æ˜¯æ€ä¹ˆæ¥çš„ 
* è¿˜éœ€è¦è€ƒè™‘ dp(i, j â€“ 1)ã€dp(i â€“ 1, j) æ˜¯æ€ä¹ˆæ¥çš„

#### **å®ç°æ­¥éª¤**

* å®šä¹‰çŠ¶æ€ï¼šçŠ¶æ€æŒ‡çš„æ˜¯åŸé—®é¢˜ï¼Œå­é—®é¢˜çš„è§£ï¼Œä¾‹å¦‚dp(i)
* è®¾å®šåˆå§‹çŠ¶æ€ï¼šé—®é¢˜çš„è¾¹ç•Œï¼Œæ¯”å¦‚è®¾ç½®dp(0)çš„å€¼
* ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šå¦‚ç¡®å®š dp(i) å’Œ dp(i â€“ 1) çš„å…³ç³»

#### **é›¶é’±å…‘æ¢**

å‡è®¾æœ‰25åˆ†ã€20åˆ†ã€5åˆ†ã€1åˆ†çš„ç¡¬å¸ï¼Œç°è¦æ‰¾ç»™å®¢æˆ·41åˆ†çš„é›¶é’±ï¼Œå¦‚ä½•åŠåˆ°ç¡¬å¸ä¸ªæ•°æœ€å°‘? æ­¤å‰è´ªå¿ƒç­–ç•¥æ±‚è§£ç»“æœæ˜¯5æšç¡¬å¸ï¼Œå¹¶éæ˜¯æœ€ä¼˜è§£!

æ€è·¯:

* å®šä¹‰çŠ¶æ€
   dp(n):å‡‘åˆ° n åˆ†éœ€è¦çš„æœ€å°‘ç¡¬å¸ä¸ªæ•° 

* è®¾å®šåˆå§‹çŠ¶æ€ 

  dp(25)=dp(20)=dp(5)=dp(1)=1 

* ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹

   * å¦‚æœç¬¬ 1 æ¬¡é€‰æ‹©äº† 25 åˆ†çš„ç¡¬å¸ï¼Œé‚£ä¹ˆ dp(n) = dp(n â€“ 25) + 1 
   * å¦‚æœç¬¬ 1 æ¬¡é€‰æ‹©äº† 20 åˆ†çš„ç¡¬å¸ï¼Œé‚£ä¹ˆ dp(n) = dp(n â€“ 20) + 1
   *  å¦‚æœç¬¬ 1 æ¬¡é€‰æ‹©äº† 5 åˆ†çš„ç¡¬å¸ï¼Œé‚£ä¹ˆ dp(n) = dp(n â€“ 5) + 1
   *  å¦‚æœç¬¬ 1 æ¬¡é€‰æ‹©äº† 1 åˆ†çš„ç¡¬å¸ï¼Œé‚£ä¹ˆ dp(n) = dp(n â€“ 1) + 1
   *  æ‰€ä»¥ dp(n) = min { dp(n â€“ 25), dp(n â€“ 20), dp(n â€“ 5), dp(n â€“ 1) } + 1

```scala
//é€’å½’(è‡ªé¡¶å‘ä¸‹ï¼Œå‡ºç°äº†é‡å å­é—®é¢˜)
def coinChange1(n: Int):Int = {
  // è¾¹ç•ŒçŠ¶æ€
  if (n < 1) return Int.MaxValue
  // è®¾å®šåˆå§‹çŠ¶æ€ 
  if(List(1, 5, 20, 25).contains(n)) return 1
	
  // çŠ¶æ€è½¬ç§»æ–¹ç¨‹
  List(
    coinChange1(n-1),
    coinChange1(n-5),
    coinChange1(n-20),
    coinChange1(n-25)
  ).min + 1
}
```

è¿™ç§é€’å½’æ–¹å¼ä¼šå­˜åœ¨å¤§é‡é‡å¤è®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯æ¯”è¾ƒé«˜çš„!!

**ä¼˜åŒ–ä¸€**

ä½¿ç”¨é€’æ¨æ–¹å¼å®ç°ï¼Œä»å°è®¡ç®—åˆ°å¤§ã€‚

```scala
//  é€’æ¨(è‡ªåº•å‘ä¸Šï¼Œå¾ªç¯)
def coinChange2(n: Int):Int = {
  if (n < 1) return Int.MaxValue
  if(List(1, 5, 20, 25).contains(n)) return 1

  val dp = Array.fill(n+1)(Int.MaxValue)
  dp(1) = 1
  dp(5) = 1
  dp(20) = 1
  dp(25) = 1

  for (i <- 1 to n) {
    if (i > 25) {
      dp(i) = List(dp(i-1), dp(i-5), dp(i-20), dp(i-25)).min+1
    } else if (i > 20) {
      dp(i) = List(dp(i-1), dp(i-5), dp(i-20)).min+1
    } else if (i > 5) {
      dp(i) = List(dp(i-1), dp(i-5)).min+1
    } else if (i > 1) {
      dp(i) = dp(i-1)+1
    }
  }
  dp(n)
}
```

é€šç”¨æ–¹æ¡ˆ

```scala
/**
* åŠ¨æ€è§„åˆ’å®ç°é›¶é’±å…‘æ¢
* @param amount éœ€è¦å…‘æ¢çš„æ€»é¢
* @param coins å¸çš„ç±»å‹
* @return æœ€å°å¸æ•°ï¼Œå¦‚æœä¸å­˜åœ¨å°±è¿”å›-1
*/
def coinChange4(amount: Int, coins: List[Int]):Int = {
  if (amount < 1 || coins == null || coins.isEmpty) return -1

  val dp = Array.fill(amount+1)(0)

  for (i <- 1 to amount) {
    var min = Int.MaxValue

    coins.foreach { face =>
      if (i >= face && dp(i-face) >= 0) {
        min = Math.min(dp(i-face), min)
      }
    }

    if (min == Int.MaxValue) {
      dp(i) = -1
    } else {
      dp(i) = min+1
    }
  }
  dp(amount)
}
```

**æœ€å¤§çš„è¿ç»­å­åºåˆ—å’Œ** 

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°åºåˆ—ï¼Œæ±‚å®ƒçš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œ

```sh
â€“2ã€1ã€â€“3ã€4ã€â€“1ã€2ã€1ã€â€“5ã€4 çš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œæ˜¯ 4 + (â€“1) + 2 + 1 = 6
```

* å®šä¹‰çŠ¶æ€

  dp(i) æ˜¯ä»¥ nums[i] ç»“å°¾çš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œ(numsæ˜¯æ•´ä¸ªåºåˆ—)

* åˆå§‹çŠ¶æ€
  dp(0)=nums[0]

* çŠ¶æ€è½¬ç§»æ–¹ç¨‹

  ```sh
  å¦‚æœä»¥ nums[0] â€“2 ç»“å°¾ï¼Œåˆ™æœ€å¤§è¿ç»­å­åºåˆ—æ˜¯ â€“2ï¼Œæ‰€ä»¥ dp(0) = â€“2
  å¦‚æœä»¥ nums[1] 1 ç»“å°¾ï¼Œåˆ™æœ€å¤§è¿ç»­å­åºåˆ—æ˜¯ 1ï¼Œæ‰€ä»¥ dp(1) = 1
  å¦‚æœä»¥ nums[2] â€“3 ç»“å°¾ï¼Œåˆ™æœ€å¤§è¿ç»­å­åºåˆ—æ˜¯ 1ã€â€“3ï¼Œæ‰€ä»¥ dp(2) = dp(1) + (â€“3) = â€“2
  å¦‚æœä»¥ nums[3] 4 ç»“å°¾ï¼Œåˆ™æœ€å¤§è¿ç»­å­åºåˆ—æ˜¯ 4ï¼Œæ‰€ä»¥ dp(3) = 4
  å¦‚æœä»¥ nums[4] â€“1 ç»“å°¾ï¼Œåˆ™æœ€å¤§è¿ç»­å­åºåˆ—æ˜¯ 4ã€â€“1ï¼Œæ‰€ä»¥ dp(4) = dp(3) + (â€“1) = 3
  å¦‚æœä»¥ nums[5] 2 ç»“å°¾ï¼Œåˆ™æœ€å¤§è¿ç»­å­åºåˆ—æ˜¯ 4ã€â€“1ã€2ï¼Œæ‰€ä»¥ dp(5) = dp(4) + 2 = 5
  å¦‚æœä»¥ nums[6] 1 ç»“å°¾ï¼Œåˆ™æœ€å¤§è¿ç»­å­åºåˆ—æ˜¯ 4ã€â€“1ã€2ã€1ï¼Œæ‰€ä»¥ dp(6) = dp(5) + 1 = 6
  å¦‚æœä»¥ nums[7] â€“5 ç»“å°¾ï¼Œåˆ™æœ€å¤§è¿ç»­å­åºåˆ—æ˜¯ 4ã€â€“1ã€2ã€1ã€â€“5ï¼Œæ‰€ä»¥ dp(7) = dp(6) + (â€“5) = 1 
  å¦‚æœä»¥ nums[8] 4 ç»“å°¾ï¼Œåˆ™æœ€å¤§è¿ç»­å­åºåˆ—æ˜¯ 4ã€â€“1ã€2ã€1ã€â€“5ã€4ï¼Œæ‰€ä»¥ dp(8) = dp(7) + 4 = 5
  ```

   * å¦‚æœ dp(i â€“ 1) â‰¤ 0ï¼Œé‚£ä¹ˆ dp(i) = nums[i]
   * å¦‚æœ dp(i â€“ 1) > 0ï¼Œé‚£ä¹ˆ dp(i) = dp(i â€“ 1) + nums[i]

æœ€ç»ˆè§£:

```sh
æœ€å¤§è¿ç»­å­åºåˆ—å’Œæ˜¯æ‰€æœ‰ dp(i) ä¸­çš„æœ€å¤§å€¼ max { dp(i) }ï¼Œi âˆˆ [0, nums.length)
```

```scala
def maxSubSequence2(list: List[Int]): Int = {
  /**
   * dp(i) æ˜¯ä»¥ nums[i] ç»“å°¾çš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œ(numsæ˜¯æ•´ä¸ªåºåˆ—)
   * dp(0) = nums[0]
   * å¦‚æœ dp(i â€“ 1) â‰¤ 0ï¼Œé‚£ä¹ˆ dp(i) = nums[i]
   * å¦‚æœ dp(i â€“ 1) > 0ï¼Œé‚£ä¹ˆ dp(i) = dp(i â€“ 1) + nums[i]
   *
   * dp(i) = æœ€å¤§è¿ç»­å­åºåˆ—å’Œæ˜¯æ‰€æœ‰ dp(i) ä¸­çš„æœ€å¤§å€¼ max { dp(i) }ï¼Œi âˆˆ [0, nums.length)
   */

  if (list == null || list.isEmpty) return 0

  val dp = new Array[Int](list.size)
  dp(0) = list.head

  for (i <- 1 until list.size) {
    dp(i) = list(i) + (if(dp(i-1)<=0) 0 else dp(i-1))
  }

  dp.max
}
```

ä¼˜åŒ–æ–¹æ¡ˆï¼Œä½¿ç”¨å˜é‡ä»£æ›¿æ•°ç»„

```scala
// ä½¿ç”¨å˜é‡ä»£æ›¿æ•°ç»„
def maxSubSequence3(list: List[Int]): Int = {
  /**
   * dp(i) æ˜¯ä»¥ nums[i] ç»“å°¾çš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œ(numsæ˜¯æ•´ä¸ªåºåˆ—)
   * dp(0) = nums[0]
   * å¦‚æœ dp(i â€“ 1) â‰¤ 0ï¼Œé‚£ä¹ˆ dp(i) = nums[i]
   * å¦‚æœ dp(i â€“ 1) > 0ï¼Œé‚£ä¹ˆ dp(i) = dp(i â€“ 1) + nums[i]
   *
   * dp(i) = æœ€å¤§è¿ç»­å­åºåˆ—å’Œæ˜¯æ‰€æœ‰ dp(i) ä¸­çš„æœ€å¤§å€¼ max { dp(i) }ï¼Œi âˆˆ [0, nums.length)
   */

  if (list == null || list.isEmpty) return 0

  var lastSum = list.head
  var max = lastSum
  for (i <- 1 until list.size) {
    lastSum = list(i) + (if(lastSum<=0) 0 else lastSum)
    max = Math.max(max, lastSum)
  }

  max
}
```

#### æœ€é•¿å…¬å…±å­åºåˆ—(Longest Common Subsequenceï¼ŒLCS)

è®¡ç®—ä¸¤ä¸ªåºåˆ—çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦

[1, 3, 5, 9, 10] å’Œ [1, 4, 9, 10] çš„æœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ [1, 9, 10]ï¼Œé•¿åº¦ä¸º 3

**æ€è·¯åˆ†æ**

å‡è®¾ 2 ä¸ªåºåˆ—åˆ†åˆ«æ˜¯ nums1ã€nums2

i âˆˆ [0, nums1.length] 

j âˆˆ [0, nums2.length]

* **å®šä¹‰çŠ¶æ€æ–¹ç¨‹**

  dp(i, j) æ˜¯ [nums1 å‰ i ä¸ªå…ƒç´ ] ä¸[nums2 å‰ j ä¸ªå…ƒç´ ] çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦

* **å®šä¹‰åˆå§‹å€¼**

  dp(i, 0)ã€dp(0, j) åˆå§‹å€¼å‡ä¸º 0

* **å®šä¹‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹**

  * å‡è®¾ nums1[i â€“ 1] = nums2[j â€“ 1]ï¼Œé‚£ä¹ˆ dp(i, j) = dp(i â€“ 1, j â€“ 1) + 1

  * å‡è®¾ nums1[i â€“ 1] =Ì¸ nums2[j â€“ 1]ï¼Œé‚£ä¹ˆ dp(i, j) = max { dp(i â€“ 1, j), dp(i, j â€“ 1) }

é€’æ¨å®ç°

```scala
// äºŒç»´æ•°ç»„å®ç°
def commonNumsSubsequence2(list1: List[Int], list2: List[Int]):Unit = {
  /**
   * 1. çŠ¶æ€å‡½æ•°
   * dp(i)(j) è¡¨ç¤ºlist1çš„å‰iä¸ªå…ƒç´  å’Œ list2çš„å‰jä¸ªå…ƒç´ çš„æœ€é•¿å­åºåˆ—é•¿åº¦
   *
   * 2. åˆå§‹çŠ¶æ€
   * dp(i)(0) = 0
   * dp(0)(j) = 0
   *
   * 3. çŠ¶æ€è½¬ç§»å‡½æ•°
   * å‡è®¾ list1[i â€“ 1] = list2[j â€“ 1]ï¼Œé‚£ä¹ˆ dp(i, j) = dp(i â€“ 1, j â€“ 1) + 1
   * å‡è®¾ list1[i â€“ 1] â‰  list2[j â€“ 1]ï¼Œé‚£ä¹ˆ dp(i, j) = max { dp(i â€“ 1, j), dp(i, j â€“ 1) }
   */

  if (list1 == null || list2 == null || list1.isEmpty || list2.isEmpty) return 0

  val dp = Array.ofDim[Int](list1.size+1, list2.size+1)

  for (i <- 1 to list1.size; j <- 1 to list2.size) {
    if (list1(i-1) == list2(j-1)) {
      dp(i)(j) = dp(i-1)(j-1) + 1
    } else {
      dp(i)(j) = Math.max(dp(i-1)(j), dp(i)(j-1))
    }
  }

  dp.last.last
}
```

**ä¼˜åŒ–æ•°æ®ç»“æ„**

![image-20210426145010287](/resource/dynamic_plan/assets/image-20210426145010287.png)

å…¶å®ä¸Šé¢çš„é€’æ¨è¿‡ç¨‹ï¼Œæ¯æ¬¡åªéœ€è¦ç”¨åˆ°ä¸Šä¸€è¡Œçš„æ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥æ”¹ç”¨ä¸€ç»´æ•°ç»„æ¥å­˜çŠ¶æ€

```scala
// ä¸€ç»´æ•°ç»„å®ç°
def commonNumsSubsequence3(list1: List[Int], list2: List[Int]):Unit = {

  if (list1 == null || list2 == null || list1.isEmpty || list2.isEmpty) return

  val dp = new Array[Int](list2.size+1)

  // å¤„ç†list2æœ‰é‡å¤å…ƒç´ ï¼Œä¸”å’Œlist1ç›¸ç­‰çš„åœºæ™¯
  // æ–¹æ³•ä¸€
//    for (i <- 1 to list1.size) {
//      println()
//      var isFound = false
//      for (j <- 1 to list2.size) {
//        if (list1(i-1) == list2(j-1) && !isFound) {
//          dp(j) = dp(j-1) + 1
//          isFound = true
//        } else {
//          dp(j) = Math.max(dp(j), dp(j-1))
//        }
//        print(dp(j) + ", ")
//      }
//    }

  // æ–¹æ³•äºŒ
  for (i <- 1 to list1.size) {
    println()
    var tmp = 0
    for (j <- 1 to list2.size) {
      //æš‚å­˜ä¸Šä¸€æ¬¡å¾ªç¯å·¦ä¸Šè§’çš„å€¼
      val leftTop = tmp
      tmp = dp(j)
      if (list1(i-1) == list2(j-1)) {
        dp(j) = leftTop + 1
      } else {
        dp(j) = Math.max(dp(j), dp(j-1))
      }
    }
  }

	dp.last
}
```

#### 0-1èƒŒåŒ…é—®é¢˜

æœ‰ n ä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤§æ‰¿é‡ä¸º W çš„èƒŒåŒ…ï¼Œæ¯ä»¶ç‰©å“çš„é‡é‡æ˜¯ ğ‘¤iã€ä»·å€¼æ˜¯ ğ‘£i

åœ¨ä¿è¯æ€»é‡é‡ä¸è¶…è¿‡ W çš„å‰æä¸‹ï¼Œå°†å“ªå‡ ä»¶ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä»¥ä½¿å¾—èƒŒåŒ…çš„æ€»ä»·å€¼æœ€å¤§? 

æ³¨æ„:æ¯ä¸ªç‰©å“åªæœ‰ 1 ä»¶ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªç‰©å“åªèƒ½é€‰æ‹© 0 ä»¶æˆ–è€… 1 ä»¶ï¼Œå› æ­¤è¿™ç±»é—®é¢˜ä¹Ÿè¢«ç§°ä¸º 0-1èƒŒåŒ…é—®é¢˜

**åŠ¨æ€è§„åˆ’æ­¥éª¤**

ä½¿ç”¨æ ·ä¾‹ç±»Itemå°è£…æ•°æ®itemsï¼Œæœ€å¤§æ‰¿é‡capacity = 10

```scala
case class Item(weight: Int, value: Int) 
val items = List(
      Item(2, 6),
      Item(2, 3),
      Item(6, 5),
      Item(5, 4),
      Item(4, 6)
    )
val capacity = 10
```

* å®šä¹‰çŠ¶æ€æ–¹ç¨‹
   dp( i,  j ) æ˜¯ æœ€å¤§æ‰¿é‡ä¸º jã€æœ‰å‰ i ä»¶ç‰©å“å¯é€‰æ—¶çš„æœ€å¤§æ€»ä»·å€¼ï¼Œi âˆˆ [0, n]ï¼Œj âˆˆ [0, W] 

* åˆå§‹çŠ¶æ€
   dp( i, 0 )ã€dp( 0,  j ) åˆå§‹å€¼å‡ä¸º 0

* çŠ¶æ€è½¬ç§»æ–¹ç¨‹
   dp( i, j )=dp( i-1, j-1 )
  å¦‚æœåªå‰©æœ€åä¸€ä»¶ç‰©å“æ—¶ï¼Œæœ‰ä¸¤ç§æƒ…å†µ

  * ä¸é€‰æ‹©è¯¥ç‰©å“:dp( i, j ) = dp( i-1, j ) 
  * é€‰æ‹©è¯¥ç‰©å“:dp( i, j ) = values[i] + dp( i-1, j-weights[i] )

  dp( i, j )è¿”å›çš„æ˜¯æœ€å¤§æ€»ä»·å€¼  max{ dp( i-1, j ), values[i] + dp( i-1, j - weights[i] ) }

   * å¦‚æœ j < weights[i â€“ 1]ï¼Œé‚£ä¹ˆ dp(i, j) = dp(i â€“ 1, j)
   * å¦‚æœ j â‰¥ weights[i â€“ 1]ï¼Œé‚£ä¹ˆ dp(i, j) = max{ dp( i-1, j ), values[i] + dp( i-1, j - weights[i] ) }

```scala
// ä½¿ç”¨ I * J äºŒç»´æ•°æ®ç¼“å­˜æ•°æ®
def packSack1(items: List[Item], capacity: Int):Unit = {
  /**
   * * å®šä¹‰çŠ¶æ€æ–¹ç¨‹
   * dp(i, j) æ˜¯ æœ€å¤§æ‰¿é‡ä¸º jã€æœ‰å‰ i ä»¶ç‰©å“å¯é€‰ æ—¶çš„æœ€å¤§æ€»ä»·å€¼ï¼Œi âˆˆ [0, n]ï¼Œj âˆˆ [0, W]
   *
   * * åˆå§‹çŠ¶æ€
   * dp(i, 0)ã€dp(0, j) åˆå§‹å€¼å‡ä¸º 0
   *
   * * çŠ¶æ€è½¬ç§»æ–¹ç¨‹
   * dp(i,j)=dp(i-1,j-1)
   * å¦‚æœåªå‰©æœ€åä¸€ä»¶ç‰©å“æ—¶ï¼Œæœ‰ä¸¤ç§æƒ…å†µ
   * * ä¸é€‰æ‹©è¯¥ç‰©å“:dp(i,j)=dp(i-1,j)
   * * é€‰æ‹©è¯¥ç‰©å“:dp(i,j)=values[i]+dp(i-1,j-weights[i])
   * dp(i,j)è¿”å›çš„æ˜¯æœ€å¤§æ€»ä»·å€¼ max(dp(i-1,j),values[i]+dp(i-1,j-weights[i]))
   * å¦‚æœ j < weights[i â€“ 1]ï¼Œé‚£ä¹ˆ dp(i, j) = dp(i â€“ 1, j)
   * å¦‚æœ j â‰¥ weights[i â€“ 1]ï¼Œé‚£ä¹ˆ dp(i, j) = max { dp(i â€“ 1, j), dp(i â€“ 1, j â€“ weights[i â€“ 1]) + values[i â€“ 1] }
   */

  val dp: Array[Array[Int]] = Array.ofDim[Int](items.size+1, capacity+1)
  for (i <- 1 to items.size; j <- 1 to capacity) {
    val it = items(i-1)
    if (j < it.weight) {
      dp(i)(j) = dp(i-1)(j)
    } else {
      dp(i)(j) = Math.max(dp(i-1)(j), dp(i-1)(j-it.weight)+it.value)
    }
  }

  dp.foreach(e => println(e.toList))
  printSelectItems(items, dp)
}
```

**æ‰“å°é€‰ä¸­çš„å•†å“**

![image-20210426151447098](/resource/dynamic_plan/assets/image-20210426151447098.png)

äºŒç»´dpçš„ç»“æœå¦‚ä¸Šè¡¨ï¼Œä»æœ€ååˆ—å¾€æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥æ¨ç®—å‡ºï¼Œæ¯æ¬¡é€‰ä¸­çš„ç‰©å“

* å½“å‰åˆ—dp(i)(j) > dp(i-1)(j) 
  * è¯´æ˜é€‰ä¸­äº†ç‰©å“ iï¼Œä¸”å¯ä»¥åæ¨å‡º dp(i,j)=values[i]+dp(i-1,j-weights[i])
  * ä¸Šä¸€ä¸ªé€‰ä¸­çš„ç‰©å“å¯èƒ½æ˜¯ i-1, æ¥ä¸‹æ¥éœ€è¦åˆ¤æ–­ dp(i-1,j-weights[i])  > dp(i-2,j-weights[i])  ?
* å½“å‰åˆ—dp(i)(j) == dp(i-1)(j) 
  	* è¯´æ˜æ²¡æœ‰é€‰ä¸­ i ï¼Œåˆ¤æ–­ dp(i-1)(j) == dp(i-2)(j) ï¼Ÿ

```scala
/**
 * æ‰“å°é€‰ä¸­çš„å•†å“
 * @param items  å®Œæ•´çš„å•†å“åˆ—è¡¨
 * @param dp  åŠ¨æ€è§„åˆ’ç»“æœè¡¨
 */
def printSelectItems(items: List[Item], dp: Array[Array[Int]]): Unit = {
  var i = dp.length-1
  var j = dp.head.length-1
  val selectedItems = new ArrayBuffer[Item]()
  while (i > 0 && j > 0) {
    if (dp(i)(j) > dp(i-1)(j)) {
      selectedItems += items(i-1)
      j -= items(i-1).weight
    }

    i -= 1
  }
  println("selected items")
  println(selectedItems.reverse.toList)
}
```

**æ•°æ®ç»“æ„ä¼˜åŒ–**

```scala
// ä¼˜åŒ–æ•°æ®ç»“æ„ï¼› ä½¿ç”¨ 2 * J äºŒç»´æ•°æ®ç¼“å­˜æ•°æ®
def packSack2(items: List[Item], capacity: Int):Unit = {

  val dp = Array.ofDim[Int](2, capacity+1)
  for (i <- 1 to items.size) {
    val current = i%2
    val last = 1-current
    val it = items(i-1)
    for (j <- 1 to capacity) {
      if (j < it.weight) {
        dp(current)(j) = dp(last)(j)
      } else {
        dp(current)(j) = Math.max(dp(last)(j), dp(last)(j-it.weight)+it.value)
      }
    }
    println(dp(current).toList)
  }

  println(dp.last.last)
}

// ä¼˜åŒ–æ•°æ®ç»“æ„ï¼› ä½¿ç”¨ ä¸€ç»´æ•°æ®ç¼“å­˜æ•°æ®
def packSack3(items: List[Item], capacity: Int):Unit = {
  
  val dp = new Array[Int](capacity+1)
  for (i <- 1 to items.size) {
    val it = items(i-1)
    // WARN: è¿™é‡Œéœ€è¦é€†åºï¼Œé˜²æ­¢æ•°æ®è¢«è¦†ç›–
    for (j <- Range(capacity, it.weight-1, -1)) {
      dp(j) = Math.max(dp(j), dp(j-it.weight)+it.value)
    }
    println(dp.toList)
  }
  
  println(dp.last)
}
```











